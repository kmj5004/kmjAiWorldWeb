# 신경망 학습 시스템

MNIST 손글씨 숫자를 예측하는 신경망 학습 시스템입니다. FastAPI 백엔드와 SvelteKit 프론트엔드로 구성되어 있습니다.

## 🎯 주요 기능

### 1. 이미지 예측 (`/`)
- 이미지 파일 업로드로 숫자 예측
- 직접 그리기 기능으로 실시간 예측
- 28x28 픽셀로 자동 변환

### 2. 모델 학습 (`/train`)
- **실시간 학습 모니터링**: WebSocket을 통한 에포크별 손실/정확도 추적
- **학습 그래프**: 손실값과 정확도를 실시간 차트로 시각화
- **하이퍼파라미터 설정**: 학습률(η), 정규화(λ) 커스터마이징
- **모델 테스트**: 학습된 모델의 성능 평가
- **하이퍼파라미터 최적화**: 최적의 학습률과 람다 값 자동 탐색
- **최적화 그래프**: 조합별 정확도를 막대 그래프로 시각화

## 🚀 시작하기

### 사전 요구사항
- Node.js 18+
- Python 3.8+ (백엔드 서버)
- 실행 중인 백엔드 API 서버 (`http://localhost:8000`)

### 설치 및 실행

```bash
# 의존성 설치
npm install

# 개발 서버 실행
npm run dev

# 프로덕션 빌드
npm run build
npm run preview
```

서버가 시작되면 브라우저에서 `http://localhost:5173`으로 접속하세요.

## 📡 API 연동

### 백엔드 API
기본적으로 `http://localhost:8000`에서 실행 중인 백엔드 서버를 사용합니다.

### 주요 엔드포인트
- `GET /network/best-config` - 최적 설정 조회
- `POST /network/predict` - 이미지 예측
- `POST /network/train` - 모델 학습 시작
- `POST /network/optimize` - 하이퍼파라미터 최적화
- `GET /network/test` - 모델 테스트
- `WS /ws/training` - 실시간 학습 진행상황

상세한 API 문서는 백엔드 서버의 `/docs`를 참조하세요.

## 🎨 화면 구성

### 메인 페이지 (이미지 예측)
- 파일 업로드 방식 예측
- 캔버스 그리기 방식 예측
- 실시간 결과 표시

### 학습 페이지
1. **최적 설정 카드**: 현재 저장된 최적 하이퍼파라미터
2. **모델 학습 카드**: 
   - 학습률/람다 설정
   - 실시간 진행 상황 (에포크, 손실, 정확도)
   - **학습 그래프**: 손실값과 정확도의 실시간 라인 차트
3. **모델 테스트 카드**:
   - 테스트 데이터셋 평가
   - 랜덤 이미지 예측
   - 모델 재로드
4. **하이퍼파라미터 최적화 카드**:
   - 학습률/람다 후보군 설정
   - 실시간 최적화 진행상황
   - **최적화 그래프**: 조합별 정확도 막대 그래프
   - 전체 결과 테이블

## 🔧 이미지 처리 과정

### 업로드 이미지
1. 사용자가 이미지 파일 업로드
2. 28x28 픽셀로 다운스케일
3. RGB를 grayscale로 변환: `(R + G + B) / 3`
4. 정규화: `1.0 - (grayscale / 255.0)`
   - 흰색 배경 → 0.0
   - 검은색 전경 → 1.0
5. 784개 픽셀 배열을 API로 전송

### 그리기 캔버스
- 280x280 캔버스에서 직접 그리기
- 자동으로 28x28으로 축소
- 동일한 정규화 과정 적용

## 📊 WebSocket 실시간 데이터

### 학습 진행 데이터
```javascript
{
  "epoch": 1,
  "total_epochs": 30,
  "loss": 0.1234,
  "accuracy": 9500,
  "accuracy_percentage": 95.0,
  "total_test": 10000
}
```

### 최적화 진행 데이터
```javascript
{
  "optimization": true,
  "iteration": 1,
  "total_iterations": 5,
  "combination": 2,
  "total_combinations": 18,
  "optimization_result": {
    "eta": 0.01,
    "lambda": 0.0001,
    "accuracy": 9550,
    "percentage": 95.5,
    "is_best": true
  }
}
```

## 🛠️ 기술 스택

- **프레임워크**: SvelteKit 2.0+ (Svelte 5 runes)
- **언어**: TypeScript
- **스타일**: CSS (컴포넌트 스코프)
- **통신**: 
  - REST API (fetch)
  - WebSocket (실시간 업데이트)
- **빌드 도구**: Vite

## 📝 개발 팁

### 로컬 개발
백엔드 서버가 다른 포트에서 실행 중이면 `.env` 파일을 생성하세요:

```env
VITE_API_BASE=http://localhost:8000
```

### 빌드 확인
```bash
npm run check
```

### 타입 체킹
```bash
npm run check:watch
```

## ⚠️ 주의사항

1. **백엔드 서버 필수**: 프론트엔드만으로는 동작하지 않습니다
2. **WebSocket 연결**: 학습/최적화 시작 전에 자동으로 연결됩니다
3. **동시 실행 제한**: 학습과 최적화는 동시에 실행할 수 없습니다
4. **최적화 시간**: 하이퍼파라미터 최적화는 오래 걸릴 수 있습니다

## 📄 라이선스

이 프로젝트는 교육 목적으로 사용됩니다.
